\documentclass[a4paper,10pt]{article} 
\usepackage[utf8x]{inputenc}
\usepackage[french]{babel}
\usepackage{mathtools}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{graphicx}		 			% Inclusion des figures 
\usepackage{textcomp}
\usepackage[nointegrals]{wasysym}			% Collection de symboles mathématiques
\usepackage{multicol}					% Pour utiliser \hfill
\usepackage{ifthen}
\usepackage{tabularx}	 				% Gestion avancée des tableaux
%\usepackage{cleveref}

\usepackage{enumitem}
\usepackage{wrapfig}
%\usepackage[squaren]{SIunits}
%\usepackage[T1]{fontenc}				% Indispendable, présent dans tous les codes exemples
\usepackage[linkcolor=DarkRed,colorlinks=true, citecolor= DarkGreen, urlcolor=MidnightBlue]{hyperref} 	% Hyper ref
\usepackage{listings}					% Pour citer du code
\usepackage[justification=centering]{caption}
\usepackage{sistyle} 
\usepackage{numprint}
\usepackage{wrapfig}
\usepackage{cite}	
\usepackage{url} 					% Pour citer les sites internet dans la
%\usepackage{cleveref}
\usepackage{setspace}

\usepackage{array}	

\usepackage[svgnames]{xcolor}			%https://www.latextemplates.com/svgnames-colors

\newcommand{\bepar}[1]{
	\left( #1 \right)  
}

\newcommand{\becro}[1]{
	\left[ #1 \right]  
}

\newcommand{\rbk}[1]{\color{red}\textit{#1} \color{black}  
}

\usepackage{listings}					% Pour citer du code
%%%%%%%%%%%%%%%%%%%
%%% Élément pour citer des codes %%%
\lstset{
language=Python,
basicstyle=\ttfamily\bfseries\small, %
identifierstyle=\bfseries\color{black}, %
keywordstyle=\color{blue}, %
stringstyle=\color{black!90}, %
commentstyle=\it\color{black!70}, %
columns=flexible, %
tabsize=4, %
extendedchars=true, %
showspaces=false, %
showstringspaces=false, % %
numberstyle=\small, %
breaklines=true, %
breakautoindent=true, %
captionpos=b,
otherkeywords={cross_val_score},
keywords=[0]{cv},
keywordstyle=[0]{\color{red}},
}
%%%%%%%%%%%%%%%%%%%%%
\title{\color{red} Cas testés avec résultats \color{black}}%%%%%%%%%%%%%%%%%%%%
\date{}
\usepackage{multicol}
\usepackage{etoolbox}
\patchcmd{\thebibliography}{\section*{\refname}}
    {\begin{multicols}{2}[\section*{\refname}]}{}{}
\patchcmd{\endthebibliography}{\endlist}{\endlist\end{multicols}}{}{}


\usepackage{geometry}
\geometry{hmargin=2cm, vmargin=2cm}

%%%%%%%%%%%%%%%%%%%%
%%% Couleurs %%%
\xdefinecolor{brick}{named}{DarkRed}
\xdefinecolor{navy}{named}{Navy}
\xdefinecolor{midblue}{named}{MidnightBlue}
\xdefinecolor{dsb}{named}{DarkSlateGray}
\xdefinecolor{dgreen}{named}{DarkGreen}

%%% 	Raccourcis 	%%%
\newcommand{\keps}{$k-\varepsilon$}
\newcommand\bk{\color{black}}
\newcommand\brick{\color{brick}}
\newcommand\navy{\color{navy}}
\newcommand\midblue{\color{midblue}}
\newcommand\dsb{\color{dsb}}
\newcommand{\dgreen}{\color{dgreen}}
\newcommand\red{\color{red}}

%%%%%%%% Cigles
\newcommand{\rap}{par rapport }
\newcommand{\cad}{c'est-à-dire}

%%%%%%%% Autres

%%%%%%%%%%%%%%%%%%%
% Syntax: \colorboxed[<color model>]{<color specification>}{<math formula>}
\newcommand*{\colorboxed}{}
\def\colorboxed#1#{%
  \colorboxedAux{#1}%
}
\newcommand*{\colorboxedAux}[3]{%
  % #1: optional argument for color model
  % #2: color specification
  % #3: formula
  \begingroup
    \colorlet{cb@saved}{.}%
    \color#1{#2}%
    \boxed{%
      \color{cb@saved}%
      #3%
    }%
  \endgroup
}
\renewcommand{\sectionmark}[1]{\markright{#1}}
\usepackage{fancyhdr}
\pagestyle{fancy}
\lhead{\textbf{Nathaniel} \brick \textbf{\textsc{Saura}}}
\rhead{\markright}
\cfoot{\thepage}
\renewcommand{\headrulewidth}{0.4pt}

\numberwithin{equation}{section} %%%% To count the equation like Section.Number
\begin{document}
\maketitle
\newcolumntype{M}[1]{>{\centering\arraybackslash}m{#1}}
\newcolumntype{N}{@{}m{0pt}@{}}

\huge{À tout reprendre}

\section{Sans la deuxième condition de Wolfe}
\subsection{Fonction backline search :}
\begin{lstlisting}
    def backline_search(self, J, g_J, djk, xk, dk, rho=1., c=0.5) :
        alpha = alpha_lo = alpha_hi = 1.
        correction = False
        bool_curv  = False
        self.warn = "go on"
        
        armi  = lambda alpha : (J(xk + alpha*dk)) <=\
                (J(xk) + c * alpha * np.dot(djk.T, dk)) 
        curv  = lambda alpha : (np.linalg.norm(g_J(xk + alpha*dk))) <=\
                (0.9*np.linalg.norm(djk,2))  
        
        cpt, cptmax = 0, 15
        while (armi(alpha) == False) and cpt< cptmax and self.warn=="go on" :
            alpha_lo =  alpha
            alpha   *=  rho
            cpt     +=  1
            print (alpha,  armi(alpha))
            alpha_hi =  alpha            
        print("alpha = {}\t cpt = {}".format(alpha, cpt))
        print("Armijo = {}\t Curvature = {}".format(armi(alpha), curv(alpha)))
        
        bool_curv = curv(alpha)
        it = 0
        print ("alpha_l = {}\t alpha hi = {}".format(alpha_lo, alpha_hi))
        
        if alpha <= 1.e-14 :
            self.warn = "out"
            
        if cpt > 0 and bool_curv == False:
            alpha_2 = alpha_lo
            
            bool_curv = curv(alpha_2)
            while bool_curv == False and (alpha_2 - alpha_hi)>0 :
                alpha_2 *= 0.9        
                it  +=  1
                bool_curv = curv(alpha_2)
                        
            if bool_curv == True :
                alpha = alpha_2
                correction = True
                print ("\x1b[1;37;43malpha_2 = {}\t alpha = {}, iteration = {}\x1b[0m".format(alpha_2, alpha, it))
                                   
        if bool_curv == False and armi(alpha) == False :
            alpha = max(alpha, 1e-11)
        
        if armi(alpha) == True and curv(alpha) == True :
            print("it = {}".format(it))
            print("\x1b[1;37;43mArmijo = {}\t Curvature = {}\x1b[0m".format(armi(alpha), curv(alpha)))
            
        return alpha, correction
\end{lstlisting}
\pagebreak 

\begin{table}[h]
		% Center the table
		\centering
		% Table itself: here we have two columns which are centered and have lines to the left, right and in the middle: |c|c|
		\begin{tabular}{|M{1.6cm}|M{1.7cm}|M{1.7cm}|M{1.7cm}|M{1.7cm}|M{1.5cm} |M{2.1cm}|M{1.7cm}|N }
		\hline
		N\_discr & Num\_real & Cov\_mod & Sigma\_b & Cpt Max & \textbf{b prior}& Final Sup\_g&Passable&\\[.5cm] \hline
		
		33 & $100$ & Full & $0 \pnt 1 $ & $500$ & \textbf{1.} & 674.22679 &  \red False \bk &\\[1cm] \hline 

		33 & $100$ & Full & $0 \pnt 1 $ & $700 ou 1000$ & \textbf{1.} & 647.4511 &  \red False \bk &\\[1cm] \hline 
		33 & $100$ & Full & $0 \pnt 1 $ & $263$ & \textbf{1.5} \bk & refaire & True&\\[1cm] \hline		
		
		33 & $100$ & Full & $0 \pnt 1 $ & $106$ & \textbf{1.3}& $1\pnt1785$&True &\\[1cm] \hline

		\end{tabular} 
		\vspace{0.5cm}
		\caption{Différents cas tests de \textsc{class\_temp\_ml}. \textbf{\red N\_discr = 33; cov\_mod = full \bk}. 
		\label{tab:simParameters}}		

\end{table}
		

\pagebreak \huge{Nouveauté}
\begin{table}[h]
		% Center the table
		\centering
		% Table itself: here we have two columns which are centered and have lines to the left, right and in the middle: |c|c|
		\begin{tabular}{|M{1.6cm}|M{1.7cm}|M{1.7cm}|M{1.7cm}|M{2cm}|M{2.1cm}|M{1.9cm}|N }
		\hline
		T\_inf & N\_discr & Cov\_mod & Cpt Max & Final J(A//O)& Final Sup\_g&Comparaison &\\[.5cm] \hline
		5 & 71 & full & 350 &  & 		
		\end{tabular} 
		\vspace{0.5cm}
		\caption{Différents cas num\_real fixé à 100.} 
		\label{tab:simParameters}

\end{table}

\end{document}